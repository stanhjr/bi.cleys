{% extends 'base.html' %}
{% block content %}
{% load static %}
    
    {% include 'includes/slider_head.html' %}
    <section class="projects-overview">
        <div class="container">
            <div class="projects-overview__header section-title --section-title-center">
                <h5 class="subtitle">{{ page_model.sub_title }}</h5>
                <h2 class="like-h3">{{ page_model.title }}</h2>
            </div>
            <nav class="projects-overview__filter">
                <ul>
                    <li class="active"><a href="{% url 'project_list' %}">Alles ({{ projects_count }})</a></li>
                    {% for category in categories %}
                        <li><a href="?category={{ category.slug }}">{{ category.name }}</a></li>
                    {% endfor %}
                </ul>
            </nav>
            <div class="projects-overview__list">
                <!-- NOTE every odd "project-single" element has class="--long"
                    "--link" class can be apllied only to block which have '--long' class (also have comlitely different structure) 
                -->
                {% for project in projects %}
                    {% if forloop.counter == 5 %}
                        <a href="#" class="project-single --long --link" data-aos="fade-up">
                            <div class="project-single__link">
                                <h3 class="like-h2">Wil je dat jouw project hier ook tussen staat?</h3>
                                <div>We trachten van ieder project een topreferentie te maken, om zo nieuwe klanten te overtuigen.</div>
                                <span class="read-more --white">offerte vragen</span>
                            </div>
                        </a>
                    {% endif %}

                    {% if not forloop.counter|divisibleby:2 %}
                        <a href="{% url 'project_single_detail' pk=project.pk %}" class="project-single --long" data-aos="fade-up">
                    {% else %}
                         <a href="{% url 'project_single_detail' pk=project.pk %}" class="project-single" data-aos="fade-up">
                    {% endif %}
                            <div class="project-single__img">
                                {% for item in project.preview_images.all %}
                                    <img src="{{ item.image.url }}" alt="">
                                {% endfor %}
                            </div>
                            <ul class="tag-list">
                                {% for category in project.related_categories.all %}
                                    <li>{{ category.name }}</li>
                                {% endfor %}
                            </ul>
                        </a>
                {% endfor %}
            
            </div>
            <nav role="navigation" aria-label="Pagination Navigation">
            {% if pagination %}
                <ul class="pagination">
                    {% if page_obj.has_previous %}
                        <li class="prev"><a href="?page={{ page_obj.previous_page_number }}{{ get_params }}" aria-label="Previous Page">&lt;</a>
                    {% endif %}
                        
                    {% if page_obj.number|add:'-4' > 1 %}
                        <li><a href="?page=1{{ get_params }}">1</a></li>
                        {% if page_obj.number|add:'-5' > 1 %}
                            <li><span>...</span></li>
                        {% endif %}
                    {% endif %}
                    
                    {% for i in page_obj.paginator.page_range %}
                        {% if page_obj.number == i %}
                            <li class="active"><a href="#" aria-current="true">{{ i }}</a></li>
                        {% elif i > page_obj.number|add:'-5' and i < page_obj.number|add:'5' %}
                            <li><a href="?page={{ i }}{{ get_params }}">{{ i }}</a></li>
                            
                        {% endif %}
                    {% endfor %}
                        
                    {% if page_obj.paginator.num_pages > page_obj.number|add:'4' %}
                        {% if page_obj.paginator.num_pages >  page_obj.number|add:'5'%}
                            <li><span>...</span></li>
                        {% endif %}
                        <li><a href="?page={{ page_obj.paginator.num_pages }}{{ get_params }}">{{ page_obj.paginator.num_pages }}</a></li>
                    {% endif %}
                    
                    {% if page_obj.has_next %}
                         <li class="next"><a href="?page={{ page_obj.next_page_number }}{{ get_params }}" aria-label="Next Page">&gt;</a></li>
                    {% else %}
                        <li class="disabled"><span><i class="fa fa-chevron-right" aria-hidden="true"></i></span></li>
                    {% endif %}
                    
                </ul>
            {% endif %}
            </nav>
        </div>
    </section>
    {% include 'includes/sections/calculator_section.html' %}
    {% include 'includes/reviews.html' %}

{% endblock %}